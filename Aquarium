using System;

namespace ConsoleApp7
{
    internal class Programm
    {
        static void Main(string[] args)
        {
            List<Fish> fishes = new List<Fish>();
            Fish clownFish = new Fish(16);
            Fish redFish = new Fish(10);
            Fish blueFish = new Fish(3);
            Fish greenFish = new Fish(3);
            fishes.Add(clownFish);
            fishes.Add(blueFish);
            fishes.Add(greenFish);
            fishes.Add(redFish);
            Aquarium aquarium = new Aquarium(fishes);
            aquarium.StartTime();
        }
    }

    class Aquarium
    {
        private List<Fish> _fishes = new List<Fish>();
        private int _maximumNumberOfFishes = 5;

        public Aquarium(List<Fish> fishes)
        {
            _fishes = fishes;
        }

        public void AddFish(Fish fish)
        {
            if (IsFull() == false)
            {
                _fishes.Add(fish);
            }
            else
            {
                Console.WriteLine("Aquarium contains maximum of " + _maximumNumberOfFishes + " fishes");
            }
        }

        public void RemoveFish(Fish fish)
        {
            _fishes.Remove(fish);
        }

        public Fish GetFishByIndex(int index)
        {
            return _fishes[index];
        }

        public void ShowAllFishes()
        {
            for (int i = 0; i < _fishes.Count; i++)
            {
                Console.WriteLine(i+1 + ") " + " - " + _fishes[i].Age);
            }
        }

        public int GetFishesNumber()
        {
            return _fishes.Count;
        }

        public void SpendYear()
        {
            for (int i = 0; i < _fishes.Count; i++)
            {
                _fishes[i].SpendYear();

                if (_fishes[i].IsAlive() == false)
                {
                    _fishes.RemoveAt(i);
                    i--;
                }
            }
        }

        public void StartTime()
        {
            int pause = 100;

            while (_fishes.Count != 0)
            {
                Thread.Sleep(pause);
                ShowAllFishes();
                SpendYear();
                Console.WriteLine("=======================");
            }
            Console.WriteLine("It's gone");
        }

        private bool IsFull()
        {
                return _fishes.Count == _maximumNumberOfFishes;
        }
    }

    class Fish
    {
        private int _timeToLive;
        private int _maximumTimeToLive = 20;

        public int Age { get; private set; }

        public Fish(int age)
        {
            Age = age;
            _timeToLive = _maximumTimeToLive - age;
        }

        public void SpendYear()
        {
            _timeToLive -= 1;
            Age += 1;
        }

        public bool IsAlive()
        {
            if (_timeToLive > 0)
            {
                return true;
            }
            else
            {
                return false;
            }
        }
    }
}
//Есть аквариум, в котором плавают рыбы. 
//    В этом аквариуме может быть максимум 
//определенное кол-во рыб. Рыб можно добавить 
//в аквариум или рыб можно достать из аквариума.
//    (программу делать в цикле для того, чтобы рыбы могли “жить”)
//Все рыбы отображаются списком,
//у рыб также есть возраст. 
//За 1 итерацию рыбы стареют
//на определенное кол-во жизней
//и могут умереть. Рыб также вывести в консоль,
//чтобы можно было мониторить показатели.
